

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>16. Clock And Reset - RISC-V VeeR EL2 Programmer's Reference Manual  documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/sphinx_immaterial_theme.c5589c0bd87d933a4.min.css?v=eeeb54bc" />
        <link rel="stylesheet" type="text/css" href="_static/main.css" />
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-header__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RISC-V VeeR EL2 Programmer's Reference Manual  documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              16. Clock And Reset
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-nav__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    RISC-V VeeR EL2 Programmer's Reference Manual  documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="intro.html" class="md-nav__link">
        <span class="md-ellipsis">RISC-<wbr>V Vee<wbr>R EL2 Programmer’s Reference Manual</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        <span class="md-ellipsis">Core Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="memory-map.html" class="md-nav__link">
        <span class="md-ellipsis">Memory Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="error-protection.html" class="md-nav__link">
        <span class="md-ellipsis">Memory Error Protection</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="dual-core-lock-step.html" class="md-nav__link">
        <span class="md-ellipsis">Dual-<wbr>Core Lockstep <wbr>(DCLS)</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="timers.html" class="md-nav__link">
        <span class="md-ellipsis">Internal Timers</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="power.html" class="md-nav__link">
        <span class="md-ellipsis">Power Management and Multi-<wbr>Core Debug Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="interrupts.html" class="md-nav__link">
        <span class="md-ellipsis">External Interrupts</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="performance.html" class="md-nav__link">
        <span class="md-ellipsis">Performance Monitoring</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="cache.html" class="md-nav__link">
        <span class="md-ellipsis">Cache Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="debugging.html" class="md-nav__link">
        <span class="md-ellipsis">Debug Support</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="core-control.html" class="md-nav__link">
        <span class="md-ellipsis">Low-<wbr>Level Core Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="adaptations.html" class="md-nav__link">
        <span class="md-ellipsis">Standard RISC-<wbr>V CSRs with Core-<wbr>Specific Adaptations</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="csrs.html" class="md-nav__link">
        <span class="md-ellipsis">CSR Address Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="interrupt-priority.html" class="md-nav__link">
        <span class="md-ellipsis">Interrupt Priorities</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Clock And Reset</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Clock And Reset</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">Features</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clocking" class="md-nav__link">
    <span class="md-ellipsis">Clocking</span>
  </a>
  
    <nav class="md-nav" aria-label="Clocking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regular-operation" class="md-nav__link">
    <span class="md-ellipsis">Regular Operation</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-bus-to-core-clock-ratios" class="md-nav__link">
    <span class="md-ellipsis">System Bus-<wbr>to-<wbr>Core Clock Ratios</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-signals" class="md-nav__link">
    <span class="md-ellipsis">Asynchronous Signals</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reset" class="md-nav__link">
    <span class="md-ellipsis">Reset</span>
  </a>
  
    <nav class="md-nav" aria-label="Reset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-complex-reset-rst-l" class="md-nav__link">
    <span class="md-ellipsis">Core Complex Reset <wbr>(rst_<wbr>l)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-module-reset-dbg-rst-l" class="md-nav__link">
    <span class="md-ellipsis">Debug Module Reset <wbr>(dbg_<wbr>rst_<wbr>l)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugger-initiating-reset-via-jtag-interface" class="md-nav__link">
    <span class="md-ellipsis">Debugger Initiating Reset via JTAG Interface</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-complex-reset-to-debug-mode" class="md-nav__link">
    <span class="md-ellipsis">Core Complex Reset to Debug Mode</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="complex-ports.html" class="md-nav__link">
        <span class="md-ellipsis">Complex Port List</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="build-args.html" class="md-nav__link">
        <span class="md-ellipsis">Build Arguments</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="tests.html" class="md-nav__link">
        <span class="md-ellipsis">Compliance Test Suite Failures</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="errata.html" class="md-nav__link">
        <span class="md-ellipsis">Errata</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="physical-memory-protection.html" class="md-nav__link">
        <span class="md-ellipsis">Physical Memory Protection</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="user-mode.html" class="md-nav__link">
        <span class="md-ellipsis">User Mode</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="verification.html" class="md-nav__link">
        <span class="md-ellipsis">Verification</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="simulation-debugging.html" class="md-nav__link">
        <span class="md-ellipsis">Interactive Debugging in Simulation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="tock.html" class="md-nav__link">
        <span class="md-ellipsis">Running Tock OS</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="clock-and-reset"><span class="section-number">16. </span>Clock And Reset<a class="headerlink" href="#clock-and-reset" title="Link to this heading">¶</a></h1>
<p>This chapter describes clocking and reset signals used by the VeeR EL2 core complex.</p>
<h2 id="features"><span class="section-number">16.1. </span>Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h2>
<p>The VeeR EL2 core complex’s clock and reset features are:</p>
<ul class="simple">
<li><p>Support for independent clock ratios for four separate system bus interfaces</p>
<ul>
<li><p>System bus clock ratios controlled by SoC</p></li>
</ul>
</li>
<li><p>Single core complex clock input</p>
<ul>
<li><p>System bus clock ratios controlled by enable signals</p></li>
</ul>
</li>
<li><p>Single core complex reset signal</p>
<ul>
<li><p>Ability to reset to Debug Mode</p></li>
</ul>
</li>
<li><p>Separate Debug Module reset signal</p>
<ul>
<li><p>Allows to interact with Debug Module when core complex is still in reset</p></li>
</ul>
</li>
</ul>
<h2 id="clocking"><span class="section-number">16.2. </span>Clocking<a class="headerlink" href="#clocking" title="Link to this heading">¶</a></h2>
<h3 id="regular-operation"><span class="section-number">16.2.1. </span>Regular Operation<a class="headerlink" href="#regular-operation" title="Link to this heading">¶</a></h3>
<p>The VeeR EL2 core complex is driven by a single clock (<code class="docutils literal notranslate"><span class="pre">clk</span></code>).
All input and output signals, except those listed in <a class="reference internal" href="#tab-core-complex-async-signals"><span class="std std-numref">Table 16.1</span></a>, are synchronous to <code class="docutils literal notranslate"><span class="pre">clk</span></code>.</p>
<p>The core complex provides three master system bus interfaces (for instruction fetch, load/store data, and debug) as well as one slave (DMA) system bus interface.
The SoC controls the clock ratio for each system bus interface via the clock enable signal (<code class="docutils literal notranslate"><span class="pre">*_bus_clk_en</span></code>).
The clock ratios selected by the SoC may be the same or different for each system bus.</p>
<p><a class="reference internal" href="#fig-data-timing-relationship"><span class="std std-numref">Fig. 16.1</span></a> depicts the conceptual relationship of the clock (<code class="docutils literal notranslate"><span class="pre">clk</span></code>), system bus enable (<code class="docutils literal notranslate"><span class="pre">*_bus_clk_en</span></code>) used to select the clock ratio for each system bus, and the data (<code class="docutils literal notranslate"><span class="pre">*data</span></code>) of the respective system bus.</p>
<figure class="align-default" id="fig-data-timing-relationship">
<img alt="Data Timing Relationship" src="_images/clock_timing.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.1 </span><span class="caption-text"><span class="caption-text">
Conceptual Clock, Clock-Enable, and Data Timing Relationship</span><a class="headerlink" href="#fig-data-timing-relationship" title="Permalink to this image">¶</a></figcaption>
</figure>
<p>Note that the clock net is not explicitly buffered, as the clock tree is expected to be synthesized during place-androute.
The achievable clock frequency depends on the configuration, the sizes and configuration of I-cache and I/DCCMs, and the silicon implementation technology.</p>
<h3 id="system-bus-to-core-clock-ratios"><span class="section-number">16.2.2. </span>System Bus-to-Core Clock Ratios<a class="headerlink" href="#system-bus-to-core-clock-ratios" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="#fig-1-1-bus2core-clock-ratio"><span class="std std-numref">Fig. 16.2</span></a> to <a class="reference internal" href="#fig-1-8-bus2core-clock-ratio"><span class="std std-numref">Fig. 16.9</span></a> depict the timing relationships of clock, clock-enable, and data for the supported system bus clock ratios from 1:1 (i.e. the system bus and core run at the same rate) to 1:8 (i.e. the system bus runs eight times slower than the core).</p>
<figure class="align-default" id="fig-1-1-bus2core-clock-ratio">
<img alt="1 1 Bus-to-Core Clock Ratio" src="_images/1_1_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.2 </span><span class="caption-text"><span class="caption-text">
1:1 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-1-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<figure class="align-default" id="fig-1-2-bus2core-clock-ratio">
<img alt="1 2 Bus-to-Core Clock Ratio" src="_images/1_2_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.3 </span><span class="caption-text"><span class="caption-text">
1:2 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-2-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<figure class="align-default" id="fig-1-3-bus2core-clock-ratio">
<img alt="1 3 Bus-to-Core Clock Ratio" src="_images/1_3_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.4 </span><span class="caption-text"><span class="caption-text">
1:3 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-3-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<figure class="align-default" id="fig-1-4-bus2core-clock-ratio">
<img alt="1 4 Bus-to-Core Clock Ratio" src="_images/1_4_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.5 </span><span class="caption-text"><span class="caption-text">
1:4 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-4-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<figure class="align-default" id="fig-1-5-bus2core-clock-ratio">
<img alt="1 5 Bus-to-Core Clock Ratio" src="_images/1_5_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.6 </span><span class="caption-text"><span class="caption-text">
1:5 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-5-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<figure class="align-default" id="fig-1-6-bus2core-clock-ratio">
<img alt="1 6 Bus-to-Core Clock Ratio" src="_images/1_6_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.7 </span><span class="caption-text"><span class="caption-text">
1:6 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-6-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<figure class="align-default" id="fig-1-7-bus2core-clock-ratio">
<img alt="1 7 Bus-to-Core Clock Ratio" src="_images/1_7_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.8 </span><span class="caption-text"><span class="caption-text">
1:7 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-7-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<figure class="align-default" id="fig-1-8-bus2core-clock-ratio">
<img alt="1 8 Bus-to-Core Clock Ratio" src="_images/1_8_bus2core_clock_ratio.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.9 </span><span class="caption-text"><span class="caption-text">
1:8 System Bus-to-Core Clock Ratio</span><a class="headerlink" href="#fig-1-8-bus2core-clock-ratio" title="Permalink to this image">¶</a></figcaption>
</figure>
<h3 id="asynchronous-signals"><span class="section-number">16.2.3. </span>Asynchronous Signals<a class="headerlink" href="#asynchronous-signals" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="#tab-core-complex-async-signals"><span class="std std-numref">Table 16.1</span></a> provides a list of signals which are asynchronous to the core clock (<code class="docutils literal notranslate"><span class="pre">clk</span></code>).
Signals which are inputs to the core complex are synchronized to <code class="docutils literal notranslate"><span class="pre">clk</span></code> in the core complex logic.
Signals which are outputs of the core complex must be synchronized outside of the core complex logic if the respective receiving clock domain is driven by a different clock than <code class="docutils literal notranslate"><span class="pre">clk</span></code>.</p>
<p>Note that each asynchronous input passes through a two-stage synchronizer.
The signal must be asserted for at least two full <code class="docutils literal notranslate"><span class="pre">clk</span></code> cycles to guarantee it is detected by the core complex logic.
Shorter pulses might be dropped by the synchronizer circuit.</p>
<table class="docutils data align-default" id="tab-core-complex-async-signals">
<caption><span class="caption-number">Table 16.1 </span><span class="caption-text">Core Complex Asynchronous Signals</span><a class="headerlink" href="#tab-core-complex-async-signals" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Signal</p></th>
<th class="head"><p>Dir</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Interrupts</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>extintsrc_req[pt.PIC_TOTAL_INT:1]</p></td>
<td><p>in</p></td>
<td><p>External interrupts</p></td>
</tr>
<tr class="row-even"><td><p>soft_int</p></td>
<td><p>in</p></td>
<td><p>Standard RISC-V software interrupt</p></td>
</tr>
<tr class="row-odd"><td><p>timer_int</p></td>
<td><p>in</p></td>
<td><p>Standard RISC-V timer interrupt</p></td>
</tr>
<tr class="row-even"><td><p>nmi_int</p></td>
<td><p>in</p></td>
<td><p>Non-Maskable Interrupt|</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Power Management Unit (PMU) Interface</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>i_cpu_halt_req</p></td>
<td><p>in</p></td>
<td><p>PMU halt request to core</p></td>
</tr>
<tr class="row-odd"><td><p>i_cpu_run_req</p></td>
<td><p>in</p></td>
<td><p>PMU run request to core</p></td>
</tr>
<tr class="row-even"><td><p><strong>Multi-Processor Controller (MPC) Debug Interface</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mpc_debug_halt_req</p></td>
<td><p>in</p></td>
<td><p>MPC debug halt request to core</p></td>
</tr>
<tr class="row-even"><td><p>mpc_debug_run_req</p></td>
<td><p>in</p></td>
<td><p>MPC debug run request to core</p></td>
</tr>
<tr class="row-odd"><td><p><strong>JTAG</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>jtag_tck</p></td>
<td><p>in</p></td>
<td><p>JTAG Test Clock</p></td>
</tr>
<tr class="row-odd"><td><p>jtag_tms</p></td>
<td><p>in</p></td>
<td><p>JTAG Test Mode Select (synchronous to jtag_tck)</p></td>
</tr>
<tr class="row-even"><td><p>jtag_tdi</p></td>
<td><p>in</p></td>
<td><p>JTAG Test Data In (synchronous to jtag_tck)</p></td>
</tr>
<tr class="row-odd"><td><p>jtag_trst_n</p></td>
<td><p>in</p></td>
<td><p>JTAG Test Reset</p></td>
</tr>
<tr class="row-even"><td><p>jtag_tdo</p></td>
<td><p>out</p></td>
<td><p>JTAG Test Data Out (synchronous to jtag_tck)</p></td>
</tr>
</tbody>
</table>
<h2 id="reset"><span class="section-number">16.3. </span>Reset<a class="headerlink" href="#reset" title="Link to this heading">¶</a></h2>
<p>The VeeR EL2 core complex provides two reset signals, the core complex reset, see <a class="reference internal" href="#core-complex-reset-rst-l"><span class="std std-ref">Core Complex Reset (rst_l)</span></a> and the Debug Module reset, see <a class="reference internal" href="#debug-module-reset-dbg-rst-l"><span class="std std-ref">Debug Module Reset (dbg_rst_l)</span></a>.</p>
<h3 id="core-complex-reset-rst-l"><span class="section-number">16.3.1. </span>Core Complex Reset (rst_l)<a class="headerlink" href="#core-complex-reset-rst-l" title="Link to this heading">¶</a></h3>
<p>As shown in <a class="reference internal" href="#fig-clock-reset-timing"><span class="std std-numref">Fig. 16.10</span></a>, the core complex reset signal (<code class="docutils literal notranslate"><span class="pre">rst_l</span></code>) is active-low, may be asynchronously asserted, but must be synchronously deasserted to avoid any glitches.
The <code class="docutils literal notranslate"><span class="pre">rst_l</span></code> input signal is not synchronized to the core clock (<code class="docutils literal notranslate"><span class="pre">clk</span></code>) inside the core complex logic.
All core complex flops are reset asynchronously.</p>
<figure class="align-default" id="fig-clock-reset-timing">
<img alt="Clock Reset Timing" src="_images/clock_reset_timing.png" />
<figcaption>
<p><span class="caption-number">Fig. 16.10 </span><span class="caption-text"><span class="caption-text">
Conceptual Clock and Reset Timing Relationship</span><a class="headerlink" href="#fig-clock-reset-timing" title="Permalink to this image">¶</a></figcaption>
</figure>
<p>Note that the core complex clock (<code class="docutils literal notranslate"><span class="pre">clk</span></code>) must be stable before the core complex reset (<code class="docutils literal notranslate"><span class="pre">rst_l</span></code>) is deasserted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>From a backend perspective, care should be taken during place-and-route optimization steps to adequately build buffer tree and distribution network of the <code class="docutils literal notranslate"><span class="pre">rst_l</span></code> signal. Slew (transition time) targets should be in the same range as functional signals and distribution delays should be closely matched to clock delays, to maintain reasonable latencies and skews. Further, <code class="docutils literal notranslate"><span class="pre">rst_l</span></code> specific timing checks can be performed during final signoff timing to ensure proper functionality, though they are more complex and challenging to model through static timing analysis.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The core complex reset signal resets the entire VeeR EL2 core complex, except the Debug Module.</p>
</div>
<h3 id="debug-module-reset-dbg-rst-l"><span class="section-number">16.3.2. </span>Debug Module Reset (dbg_rst_l)<a class="headerlink" href="#debug-module-reset-dbg-rst-l" title="Link to this heading">¶</a></h3>
<p>The Debug Module reset signal (<code class="docutils literal notranslate"><span class="pre">dbg_rst_l</span></code>) is an active-low signal which resets the VeeR EL2 core complex’s Debug Module as well as the synchronizers between the JTAG interface and the core complex.
The Debug Module reset signal may be connected to the power-on reset signal of the SoC.
This allows an external debugger to interact with the Debug Module when the core complex reset signal (<code class="docutils literal notranslate"><span class="pre">rst_l</span></code>) is still asserted.</p>
<p>If this layered reset functionality is not required, the <code class="docutils literal notranslate"><span class="pre">dbg_rst_l</span></code> signal may be tied to the <code class="docutils literal notranslate"><span class="pre">rst_l</span></code> signal outside the core complex.</p>
<h3 id="debugger-initiating-reset-via-jtag-interface"><span class="section-number">16.3.3. </span>Debugger Initiating Reset via JTAG Interface<a class="headerlink" href="#debugger-initiating-reset-via-jtag-interface" title="Link to this heading">¶</a></h3>
<p>A debugger may also initiate a reset of the core complex logic via the JTAG interface.
Note that such a reset assertion is not visible to the SoC.
Resetting the core complex while the core is accessing any SoC memory locations may result in unpredictable behavior.
Recovery may require an assertion of the SoC master reset.</p>
<h3 id="core-complex-reset-to-debug-mode"><span class="section-number">16.3.4. </span>Core Complex Reset to Debug Mode<a class="headerlink" href="#core-complex-reset-to-debug-mode" title="Link to this heading">¶</a></h3>
<p>The RISC-V Debug specification <a class="reference internal" href="intro.html#ref-3"><span class="std std-ref">[3]</span></a> states a requirement that the debugger must be able to be in control from the first executed instruction of a program after a reset.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> register, see <a class="reference internal" href="debugging.html#debug-module-control-register-dmcontrol"><span class="std std-ref">Debug Module Control Register (dmcontrol)</span></a>, of the Debug Module controls the core-complex-internal ndmreset (non-debug module reset) signal.
This signal resets the core complex (except for the Debug Module and Debug Transport Module).</p>
<p>The following sequence is used to reset the core and execute the first instruction in Debug Mode (i.e., db-halt state):</p>
<ol class="arabic simple">
<li><p>Take Debug Module out of reset</p>
<ul class="simple">
<li><p>Set <em>dmactive</em> bit of <code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> register (<code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> = 0x0000_0001)</p></li>
</ul>
</li>
<li><p>Reset core complex</p>
<ul class="simple">
<li><p>Set <em>ndmreset</em> bit of <code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> register (<code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> = 0x0000_0003)</p></li>
</ul>
</li>
<li><p>While in reset, assert halt request with ndmreset still asserted</p>
<ul class="simple">
<li><p>Set <em>haltreq</em> bit of <code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> register (<code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> = 0x8000_0003)</p></li>
</ul>
</li>
<li><p>Take core complex out of reset with halt request still asserted</p>
<ul class="simple">
<li><p>Clear <em>ndmreset</em> bit of <code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> register (<code class="docutils literal notranslate"><span class="pre">dmcontrol</span></code> = 0x8000_0001)</p></li>
</ul>
</li>
</ol>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2025-12-29
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="interrupt-priority.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: 15. Interrupt Priorities" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              15. Interrupt Priorities
            </div>
          </div>
        </a>
      
      
        
        <a href="complex-ports.html" class="md-footer__link md-footer__link--next" aria-label="Next: 17. Complex Port List" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              17. Complex Port List
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        Copyright &#169; 2025 CHIPS Alliance The Linux Foundation®.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/antmicro" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/antmicro" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
    
  </body>
</html>