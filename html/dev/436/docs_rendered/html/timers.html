

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>6. Internal Timers - RISC-V VeeR EL2 Programmer's Reference Manual  documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/sphinx_immaterial_theme.c5589c0bd87d933a4.min.css?v=eeeb54bc" />
        <link rel="stylesheet" type="text/css" href="_static/main.css" />
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-header__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RISC-V VeeR EL2 Programmer's Reference Manual  documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              6. Internal Timers
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-nav__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    RISC-V VeeR EL2 Programmer's Reference Manual  documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="intro.html" class="md-nav__link">
        <span class="md-ellipsis">RISC-<wbr>V Vee<wbr>R EL2 Programmer’s Reference Manual</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        <span class="md-ellipsis">Core Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="memory-map.html" class="md-nav__link">
        <span class="md-ellipsis">Memory Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="error-protection.html" class="md-nav__link">
        <span class="md-ellipsis">Memory Error Protection</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="dual-core-lock-step.html" class="md-nav__link">
        <span class="md-ellipsis">Dual-<wbr>Core Lockstep <wbr>(DCLS)</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Internal Timers</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Internal Timers</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">Features</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">Description</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal-timer-local-interrupts" class="md-nav__link">
    <span class="md-ellipsis">Internal Timer Local Interrupts</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-status-registers" class="md-nav__link">
    <span class="md-ellipsis">Control/Status Registers</span>
  </a>
  
    <nav class="md-nav" aria-label="Control/Status Registers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#internal-timer-counter-0-1-register-mitcnt0-1" class="md-nav__link">
    <span class="md-ellipsis">Internal Timer Counter 0 / 1 Register <wbr>(mitcnt0/1)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-timer-bound-0-1-register-mitb0-1" class="md-nav__link">
    <span class="md-ellipsis">Internal Timer Bound 0 / 1 Register <wbr>(mitb0/1)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-timer-control-0-1-register-mitctl0-1" class="md-nav__link">
    <span class="md-ellipsis">Internal Timer Control 0 / 1 Register <wbr>(mitctl0/1)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="power.html" class="md-nav__link">
        <span class="md-ellipsis">Power Management and Multi-<wbr>Core Debug Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="interrupts.html" class="md-nav__link">
        <span class="md-ellipsis">External Interrupts</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="performance.html" class="md-nav__link">
        <span class="md-ellipsis">Performance Monitoring</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="cache.html" class="md-nav__link">
        <span class="md-ellipsis">Cache Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="debugging.html" class="md-nav__link">
        <span class="md-ellipsis">Debug Support</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="core-control.html" class="md-nav__link">
        <span class="md-ellipsis">Low-<wbr>Level Core Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="adaptations.html" class="md-nav__link">
        <span class="md-ellipsis">Standard RISC-<wbr>V CSRs with Core-<wbr>Specific Adaptations</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="csrs.html" class="md-nav__link">
        <span class="md-ellipsis">CSR Address Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="interrupt-priority.html" class="md-nav__link">
        <span class="md-ellipsis">Interrupt Priorities</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="clocks.html" class="md-nav__link">
        <span class="md-ellipsis">Clock And Reset</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="complex-ports.html" class="md-nav__link">
        <span class="md-ellipsis">Complex Port List</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="build-args.html" class="md-nav__link">
        <span class="md-ellipsis">Build Arguments</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="tests.html" class="md-nav__link">
        <span class="md-ellipsis">Compliance Test Suite Failures</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="errata.html" class="md-nav__link">
        <span class="md-ellipsis">Errata</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="physical-memory-protection.html" class="md-nav__link">
        <span class="md-ellipsis">Physical Memory Protection</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="user-mode.html" class="md-nav__link">
        <span class="md-ellipsis">User Mode</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="verification.html" class="md-nav__link">
        <span class="md-ellipsis">Verification</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="simulation-debugging.html" class="md-nav__link">
        <span class="md-ellipsis">Interactive Debugging in Simulation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="tock.html" class="md-nav__link">
        <span class="md-ellipsis">Running Tock OS</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="internal-timers"><span class="section-number">6. </span>Internal Timers<a class="headerlink" href="#internal-timers" title="Link to this heading">¶</a></h1>
<p>This chapter describes the internal timer feature of the VeeR EL2 core.</p>
<h2 id="features"><span class="section-number">6.1. </span>Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h2>
<p>The VeeR EL2’s internal timer features are:</p>
<ul class="simple">
<li><p>Two independently controlled 32-bit timers</p>
<ul>
<li><p>Dedicated counter</p></li>
<li><p>Dedicated bound</p></li>
<li><p>Dedicated control to enable/disable incrementing generally, during power management Sleep, and while executing PAUSE</p></li>
<li><p>Enable/disable local interrupts (in standard RISC-V <code class="docutils literal notranslate"><span class="pre">mie</span></code> register)</p></li>
</ul>
</li>
<li><p>Cascade mode to form a single 64-bit timer</p></li>
</ul>
<h2 id="description"><span class="section-number">6.2. </span>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>The VeeR EL2 core implements two internal timers.
The <code class="docutils literal notranslate"><span class="pre">mitcnt0</span></code> and <code class="docutils literal notranslate"><span class="pre">mitcnt1</span></code> registers (see <a class="reference internal" href="#internal-timer-counter-0-1-register-mitcnt0-1"><span class="std std-ref">Internal Timer Counter 0 / 1 Register (mitcnt0/1)</span></a>) are 32-bit unsigned counters.
Each counter also has a corresponding 32-bit unsigned bound register (i.e., <code class="docutils literal notranslate"><span class="pre">mitb0</span></code> and <code class="docutils literal notranslate"><span class="pre">mitb1</span></code>, see <a class="reference internal" href="#internal-timer-bound-0-1-register-mitb0-1"><span class="std std-ref">Internal Timer Bound 0 / 1 Register (mitb0/1)</span></a>) and control register (i.e., <code class="docutils literal notranslate"><span class="pre">mitctl0</span></code> and <code class="docutils literal notranslate"><span class="pre">mitctl1</span></code>, see <a class="reference internal" href="#internal-timer-control-0-1-register-mitctl0-1"><span class="std std-ref">Internal Timer Control 0 / 1 Register (mitctl0/1)</span></a>).</p>
<p>All registers are cleared at reset unless otherwise noted.
After reset, the counters start incrementing the next clock cycle if the increment conditions are met.
All registers can be read as well as written at any time.
The <code class="docutils literal notranslate"><span class="pre">mitcnt0/1</span></code> and <code class="docutils literal notranslate"><span class="pre">mitb0/1</span></code> registers may be written to any 32-bit value.
If the conditions to increment are met, the corresponding counter <code class="docutils literal notranslate"><span class="pre">mitcnt0/1</span></code> increments every clock cycle.</p>
<p>Cascade mode (see <a class="reference internal" href="#internal-timer-control-0-1-register-mitctl0-1"><span class="std std-ref">Internal Timer Control 0 / 1 Register (mitctl0/1)</span></a>) links the two counters together.
The <code class="docutils literal notranslate"><span class="pre">mitcnt1</span></code> register is only incremented when the conditions to increment <code class="docutils literal notranslate"><span class="pre">mitcnt1</span></code> are met and the <code class="docutils literal notranslate"><span class="pre">mitcnt0</span></code> register is greater than or equal to the bound in its <code class="docutils literal notranslate"><span class="pre">mitb0</span></code> register.</p>
<p>For each timer, a local interrupt (see <a class="reference internal" href="#internal-timer-local-interrupts"><span class="std std-ref">Internal Timer Local Interrupts</span></a>) is triggered when that counter is at or above its bound.
When a counter is at or above its bound, it gets cleared the next clock cycle (i.e., the interrupt condition is not sticky).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the core is in Debug Mode and being single-stepped, it may take multiple clock cycles to execute a single instruction. If the conditions to increment are met, the counter increments for every clock cycle it takes to execute a single instruction. Therefore, every executed single-stepped instruction in Debug Mode may result in multiple counter increments.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the core is in the Debug Mode’s Halted (i.e., db-halt) state, an internal timer interrupt does not transition the core back to the Active (i.e., Running) state.</p>
</div>
<h2 id="internal-timer-local-interrupts"><span class="section-number">6.3. </span>Internal Timer Local Interrupts<a class="headerlink" href="#internal-timer-local-interrupts" title="Link to this heading">¶</a></h2>
<p>Local-to-the-core interrupts for internal timer 0 and 1 have pending <a class="footnote-reference brackets" href="#fn-timers-1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> (<em>mitip0/1</em>) and enable (<em>mitie0/1</em>) bits in bit positions 29 (for internal timer 0) and 28 (for internal timer 1) of the standard RISC-V <code class="docutils literal notranslate"><span class="pre">mip</span></code> (see <a class="reference internal" href="adaptations.html#tab-machine-interrupt-pending-register"><span class="std std-numref">Table 13.2</span></a>) and <code class="docutils literal notranslate"><span class="pre">mie</span></code> (see <a class="reference internal" href="adaptations.html#tab-machine-interrupt-enable-register"><span class="std std-numref">Table 13.1</span></a>) registers, respectively.
The priority is lower than the RISC-V External, Software, and Timer interrupts (see <a class="reference internal" href="interrupt-priority.html#tab-veer-el2-platform-specific-and-std-risc-v-interrupt-priorities"><span class="std std-numref">Table 15.1</span></a>).
The internal timer 0 and 1 local interrupts have an mcause value of 0x8000_001D (for internal timer 0) and 0x8000_001C (for internal timer 1) (see <a class="reference internal" href="adaptations.html#tab-machine-cause-register"><span class="std std-numref">Table 13.3</span></a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If both internal timer interrupts occur in the same cycle, internal timer 0’s interrupt has higher priority than internal timer 1’s interrupt.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A common interrupt service routine may be used for both interrupts.
The <code class="docutils literal notranslate"><span class="pre">mcause</span></code> register value differentiates the two local interrupts.</p>
</div>
<h2 id="control-status-registers"><span class="section-number">6.4. </span>Control/Status Registers<a class="headerlink" href="#control-status-registers" title="Link to this heading">¶</a></h2>
<p>A summary of platform-specific internal timer control/status registers in CSR space:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#internal-timer-counter-0-1-register-mitcnt0-1"><span class="std std-ref">Internal Timer Counter 0 / 1 Register (mitcnt0/1)</span></a></p></li>
<li><p><a class="reference internal" href="#internal-timer-bound-0-1-register-mitb0-1"><span class="std std-ref">Internal Timer Bound 0 / 1 Register (mitb0/1)</span></a></p></li>
<li><p><a class="reference internal" href="#internal-timer-control-0-1-register-mitctl0-1"><span class="std std-ref">Internal Timer Control 0 / 1 Register (mitctl0/1)</span></a></p></li>
</ul>
<p>All reserved and unused bits in these control/status registers must be hardwired to ‘0’.
Unless otherwise noted, all read/write control/status registers must have WARL (Write Any value, Read Legal value) behavior.</p>
<h3 id="internal-timer-counter-0-1-register-mitcnt0-1"><span class="section-number">6.4.1. </span>Internal Timer Counter 0 / 1 Register (mitcnt0/1)<a class="headerlink" href="#internal-timer-counter-0-1-register-mitcnt0-1" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">mitcnt0</span></code> and <code class="docutils literal notranslate"><span class="pre">mitcnt1</span></code> registers are the counters of the internal timer 0 and 1, respectively.</p>
<p>The conditions to increment a counter are:</p>
<ul class="simple">
<li><p>The <em>enable</em> bit in the corresponding mitctl0/1 register is ‘1’,</p></li>
<li><p>if the core is in Sleep (i.e., pmu/fw-halt) state, the <em>halt_en</em> bit in the corresponding <code class="docutils literal notranslate"><span class="pre">mitctl0/1</span></code> register is ‘1’,</p></li>
<li><p>if the core is paused, the <em>pause_en</em> bit in the corresponding <code class="docutils literal notranslate"><span class="pre">mitctl0/1</span></code> register is ‘1’, and</p></li>
<li><p>the core is not in Debug Mode, except while executing a single-stepped instruction.</p></li>
</ul>
<p>A counter is cleared if its value is greater than or equal to its corresponding mitb0/1 register.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a write to the <code class="docutils literal notranslate"><span class="pre">mitcnt0/1</span></code> register is committed in the same clock cycle as the timer interrupt condition is met, the internal timer local interrupt is triggered, if enabled, but the counter is not cleared in this case. Instead, the counter is set to the written value.</p>
</div>
<p>These registers are mapped to the non-standard read/write CSR address space.</p>
<table class="docutils data align-left" id="tab-internal-timer-counter-register">
<caption><span class="caption-number">Table 6.1 </span><span class="caption-text">Internal Timer Counter 0 / 1 Register (mitcnt0/1, at CSR 0x7D2 / 0x7D5)</span><a class="headerlink" href="#tab-internal-timer-counter-register" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>count</p></td>
<td><p>31:0</p></td>
<td><p>Counter</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h3 id="internal-timer-bound-0-1-register-mitb0-1"><span class="section-number">6.4.2. </span>Internal Timer Bound 0 / 1 Register (mitb0/1)<a class="headerlink" href="#internal-timer-bound-0-1-register-mitb0-1" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">mitb0</span></code> and <code class="docutils literal notranslate"><span class="pre">mitb1</span></code> registers hold the upper bounds of the internal timer 0 and 1, respectively.</p>
<p>These registers are mapped to the non-standard read/write CSR address space.</p>
<table class="docutils data align-left" id="tab-internal-timer-bound-register">
<caption><span class="caption-number">Table 6.2 </span><span class="caption-text">Internal Timer Bound 0 / 1 Register (mitb0/1, at CSR 0x7D3 / 0x7D6)</span><a class="headerlink" href="#tab-internal-timer-bound-register" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>bound</p></td>
<td><p>31:0</p></td>
<td><p>Bound</p></td>
<td><p>R/W</p></td>
<td><p>0xFFFF_FFFF</p></td>
</tr>
</tbody>
</table>
<h3 id="internal-timer-control-0-1-register-mitctl0-1"><span class="section-number">6.4.3. </span>Internal Timer Control 0 / 1 Register (mitctl0/1)<a class="headerlink" href="#internal-timer-control-0-1-register-mitctl0-1" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">mitctl0</span></code> and <code class="docutils literal notranslate"><span class="pre">mitctl1</span></code> registers provide the control bits of the internal timer 0 and 1, respectively.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When in cascade mode, it is highly recommended to program the enable, <em>halt_en</em>, and <em>pause_en</em> control bits of the <code class="docutils literal notranslate"><span class="pre">mitctl1</span></code> register the same as the <code class="docutils literal notranslate"><span class="pre">mitctl0</span></code> register.</p>
</div>
<p>These registers are mapped to the non-standard read/write CSR address space.</p>
<table class="docutils data align-left" id="tab-internal-timer-control-register">
<caption><span class="caption-number">Table 6.3 </span><span class="caption-text">Internal Timer Control 0 / 1 Register (mitctl0/1, at CSR 0x7D4 / 0x7D7)</span><a class="headerlink" href="#tab-internal-timer-control-register" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>31:4</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>cascade <strong>(mitctl1 only)</strong></p></td>
<td><p>3</p></td>
<td><p>Cascade mode:</p>
<ul class="simple">
<li><p>0: Disable cascading (i.e., both internal timers operate independently) (default)</p></li>
<li><p>1: Enable cascading (i.e., internal timer 0 and 1 are combined into a single 64-bit timer)</p></li>
</ul>
</td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>pause_en</p></td>
<td><p>2</p></td>
<td><p>Enable/disable incrementing timer counter while executing PAUSE:</p>
<ul class="simple">
<li><p>0: Disable incrementing (default)</p></li>
<li><p>1: Enable incrementing</p></li>
</ul>
<p><strong>Note:</strong> If ‘1’ and the core is pausing (see <a class="reference internal" href="power.html#core-pause-control-register-mcpc"><span class="std std-ref">Core Pause Control Register (mcpc)</span></a>), an internal timer interrupt terminates PAUSE and regular execution is resumed.</p>
</td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>halt_en</p></td>
<td><p>1</p></td>
<td><p>Enable/disable incrementing timer counter while in Sleep (i.e., pmu/fw- halt) state:</p>
<ul class="simple">
<li><p>0: Disable incrementing (default)</p></li>
<li><p>1: Enable incrementing</p></li>
</ul>
<p><strong>Note:</strong> If ‘1’ and the core is in Sleep (i.e., pmu/fw-halt) state, an internal timer interrupt transitions the core back to the Active (i.e., Running) state and regular execution is resumed.</p>
</td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>enable</p></td>
<td><p>0</p></td>
<td><p>Enable/disable incrementing timer counter:</p>
<ul class="simple">
<li><p>0: Disable incrementing</p></li>
<li><p>1: Enable incrementing (default)</p></li>
</ul>
</td>
<td><p>R/W</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="fn-timers-1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Since internal timer interrupts are not latched (i.e., not “sticky”) and these local interrupts are only signaled for one core clock cycle, it is unlikely that they are detected by firmware in the <code class="docutils literal notranslate"><span class="pre">mip</span></code> register.</p>
</aside>
</aside>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2025-12-29
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="dual-core-lock-step.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: 5. Dual-Core Lockstep (DCLS)" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              5. Dual-Core Lockstep (DCLS)
            </div>
          </div>
        </a>
      
      
        
        <a href="power.html" class="md-footer__link md-footer__link--next" aria-label="Next: 7. Power Management and Multi-Core Debug Control" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              7. Power Management and Multi-Core Debug Control
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        Copyright &#169; 2025 CHIPS Alliance The Linux Foundation®.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/antmicro" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/antmicro" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
    
  </body>
</html>