

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>4. Memory Error Protection - RISC-V VeeR EL2 Programmer's Reference Manual  documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/sphinx_immaterial_theme.02cb18745d09eea51.min.css?v=ff456132" />
        <link rel="stylesheet" type="text/css" href="_static/main.css" />
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-header__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RISC-V VeeR EL2 Programmer's Reference Manual  documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              4. Memory Error Protection
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-nav__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    RISC-V VeeR EL2 Programmer's Reference Manual  documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="intro.html" class="md-nav__link">
        <span class="md-ellipsis">RISC-<wbr>V Vee<wbr>R EL2 Programmer’s Reference Manual</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        <span class="md-ellipsis">Core Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="memory-map.html" class="md-nav__link">
        <span class="md-ellipsis">Memory Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Memory Error Protection</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Memory Error Protection</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-description" class="md-nav__link">
    <span class="md-ellipsis">General Description</span>
  </a>
  
    <nav class="md-nav" aria-label="General Description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parity" class="md-nav__link">
    <span class="md-ellipsis">Parity</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-correcting-code-ecc" class="md-nav__link">
    <span class="md-ellipsis">Error Correcting Code <wbr>(ECC)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting-the-proper-error-protection-level" class="md-nav__link">
    <span class="md-ellipsis">Selecting the Proper Error Protection Level</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">Memory Hierarchy</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-detection-and-handling" class="md-nav__link">
    <span class="md-ellipsis">Error Detection and Handling</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-error-counter-threshold-registers" class="md-nav__link">
    <span class="md-ellipsis">Core Error Counter/Threshold Registers</span>
  </a>
  
    <nav class="md-nav" aria-label="Core Error Counter/Threshold Registers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#i-cache-error-counter-threshold-register-micect" class="md-nav__link">
    <span class="md-ellipsis">I-<wbr>Cache Error Counter/Threshold Register <wbr>(micect)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iccm-correctable-error-counter-threshold-register-miccmect" class="md-nav__link">
    <span class="md-ellipsis">ICCM Correctable Error Counter/Threshold Register <wbr>(miccmect)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dccm-correctable-error-counter-threshold-register-mdccmect" class="md-nav__link">
    <span class="md-ellipsis">DCCM Correctable Error Counter/Threshold Register <wbr>(mdccmect)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="dual-core-lock-step.html" class="md-nav__link">
        <span class="md-ellipsis">Dual-<wbr>Core Lockstep <wbr>(DCLS)</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="timers.html" class="md-nav__link">
        <span class="md-ellipsis">Internal Timers</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="power.html" class="md-nav__link">
        <span class="md-ellipsis">Power Management and Multi-<wbr>Core Debug Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="interrupts.html" class="md-nav__link">
        <span class="md-ellipsis">External Interrupts</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="performance.html" class="md-nav__link">
        <span class="md-ellipsis">Performance Monitoring</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="cache.html" class="md-nav__link">
        <span class="md-ellipsis">Cache Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="debugging.html" class="md-nav__link">
        <span class="md-ellipsis">Debug Support</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="core-control.html" class="md-nav__link">
        <span class="md-ellipsis">Low-<wbr>Level Core Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="adaptations.html" class="md-nav__link">
        <span class="md-ellipsis">Standard RISC-<wbr>V CSRs with Core-<wbr>Specific Adaptations</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="csrs.html" class="md-nav__link">
        <span class="md-ellipsis">CSR Address Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="interrupt-priority.html" class="md-nav__link">
        <span class="md-ellipsis">Interrupt Priorities</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="clocks.html" class="md-nav__link">
        <span class="md-ellipsis">Clock And Reset</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="complex-ports.html" class="md-nav__link">
        <span class="md-ellipsis">Complex Port List</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="build-args.html" class="md-nav__link">
        <span class="md-ellipsis">Build Arguments</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="tests.html" class="md-nav__link">
        <span class="md-ellipsis">Compliance Test Suite Failures</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="errata.html" class="md-nav__link">
        <span class="md-ellipsis">Errata</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="physical-memory-protection.html" class="md-nav__link">
        <span class="md-ellipsis">Physical Memory Protection</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="user-mode.html" class="md-nav__link">
        <span class="md-ellipsis">User Mode</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="verification.html" class="md-nav__link">
        <span class="md-ellipsis">Verification</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="simulation-debugging.html" class="md-nav__link">
        <span class="md-ellipsis">Interactive Debugging in Simulation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="tock.html" class="md-nav__link">
        <span class="md-ellipsis">Running Tock OS</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="memory-error-protection"><span class="section-number">4. </span>Memory Error Protection<a class="headerlink" href="#memory-error-protection" title="Link to this heading">¶</a></h1>
<h2 id="general-description"><span class="section-number">4.1. </span>General Description<a class="headerlink" href="#general-description" title="Link to this heading">¶</a></h2>
<h3 id="parity"><span class="section-number">4.1.1. </span>Parity<a class="headerlink" href="#parity" title="Link to this heading">¶</a></h3>
<p>Parity is a simple and relatively cheap protection scheme generally used when the corrupted data can be restored from some other location in the system.
A single parity check bit typically covers several data bits.
Two parity schemes are used: even and odd parity.
The total number of ‘1’ bits are counted in the protected data word, including the parity bit.
For even parity, the data is deemed to be correct if the total count is an even number.</p>
<p>Similarly, for odd parity if the total count is an odd number. Note that double-bit errors cannot be detected.</p>
<h3 id="error-correcting-code-ecc"><span class="section-number">4.1.2. </span>Error Correcting Code (ECC)<a class="headerlink" href="#error-correcting-code-ecc" title="Link to this heading">¶</a></h3>
<p>A robust memory hierarchy design often includes ECC functions to detect and, if possible, correct corrupted data.</p>
<p>The ECC functions described are made possible by Hamming code, a relatively simple yet powerful ECC code.
It involves storing and transmitting data with multiple check bits (parity) and decoding the associated check bits when retrieving or receiving data to detect and correct errors.</p>
<p>The ECC feature can be implemented with Hamming based SECDED (Single-bit Error Correction and Double-bit Error Detection) algorithm.
The design can use the (39, 32) code - 32 data bits and 7 parity bits depicted in <a class="reference internal" href="#fig-ecc-mem-diag"><span class="std std-numref">Fig. 4.1</span></a> below.
In other words, the Hamming code word width is 39 bits, comprised of 32 data bits and 7 check bits.
The minimum number of check bits needed for correcting a single-bit error in a 32-bit word is six.
The extra check bit expands the function to detect double-bit errors as well.</p>
<p>ECC codes may also be used for error detection only if other means exist to correct the data.
For example, the Icache stores exact copies of cache lines which are also residing in SoC memory.
Instead of correcting corrupted data fetched from the I-cache, erroneous cache lines may also be invalidated in the I-cache and refetched from SoC memory.
A SEDDED (Single-bit Error Detection and Double-bit Error Detection) code is sufficient in that case and provides even better protection than a SECDED code since double-bit errors are corrected as well but requires fewer bits to protect each codeword.
Note that flushing and refetching is the industry standard mechanism for recovering from I-cache errors, though commonly still referred to as ‘SECDED’.</p>
<figure class="align-default" id="fig-ecc-mem-diag">
<img alt="ECC in a Memory System" src="_images/ecc_mem_diag.png" />
<figcaption>
<p><span class="caption-number">Fig. 4.1 </span><span class="caption-text"><span class="caption-text">
Conceptual Block Diagram – ECC in a Memory System</span><a class="headerlink" href="#fig-ecc-mem-diag" title="Permalink to this image">¶</a></figcaption>
</figure>
<h2 id="selecting-the-proper-error-protection-level"><span class="section-number">4.2. </span>Selecting the Proper Error Protection Level<a class="headerlink" href="#selecting-the-proper-error-protection-level" title="Link to this heading">¶</a></h2>
<p>Choosing a protection level that is too weak might lead to loss of data or silent data corrupted, choosing a level that is too strong incurs additional chip die area (i.e., cost) and power dissipation.
Supporting multiple protection schemes for the same design increases the design and verification effort.
Sources of errors can be divided into two major categories:</p>
<ul class="simple">
<li><p>Hard errors (e.g., stuck-at bits), and</p></li>
<li><p>Soft errors (e.g., weak bits, cosmic-induced soft errors)
Selecting an adequate error protection level - e.g., none, parity, or ECC – depends on the probability of an error to occur, which depends on several factors:</p></li>
<li><p>Technology node</p></li>
<li><p>SRAM structure size</p></li>
<li><p>SRAM cell design</p></li>
<li><p>Type of stored information</p>
<ul>
<li><p>E.g., instructions in I-cache can be refetched, but data might be lost if not adequately protected</p></li>
</ul>
</li>
<li><p>Stored information being used again after corruption</p></li>
</ul>
<p>Typically, a FIT (Failure In Time) rate analysis is done to determine the proper protection level of each memory in a system.
This analysis is based on FIT rate information for a given process and SRAM cell design which are typically available from chip manufacturer.</p>
<p>Also important is the SRAM array design. The SRAM layout can have an impact on if an error is correctable or not.</p>
<p>For example, a single cosmic-induced soft error event may destroy the content of multiple bit cells in an array.
If the destroyed bits are covered by the same codeword, the data cannot be corrected or possibly even detected.</p>
<p>Therefore, the bits of each codeword should be physically spread in the array as far apart as feasibly possible. In a properly laid out SRAM array, multiple corrupted bits may result in several single-bit errors of different codewords which are correctable.</p>
<h2 id="memory-hierarchy"><span class="section-number">4.3. </span>Memory Hierarchy<a class="headerlink" href="#memory-hierarchy" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="#tab-memory-hierarchy-components-and-protection"><span class="std std-numref">Table 4.1</span></a> summarizes the components of the VeeR EL2 memory hierarchy and their respective protection scheme.</p>
<table class="docutils data align-default" id="tab-memory-hierarchy-components-and-protection">
<caption><span class="caption-number">Table 4.1 </span><span class="caption-text">Memory Hierarchy Components and Protection</span><a class="headerlink" href="#tab-memory-hierarchy-components-and-protection" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>Memory Type</strong></p></td>
<td><p><strong>Abbreviation</strong></p></td>
<td><p><strong>Protection</strong></p></td>
<td><p><strong>Reason/Justification</strong></p></td>
</tr>
<tr class="row-even"><td><p>Instruction Cache</p></td>
<td><p>I-cache</p></td>
<td><p>Parity or  SEDDED  ECC (data  and tag) <a class="footnote-reference brackets" href="#fn-error-protection-1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>Instructions can be refetched if error is detected</p></td>
</tr>
<tr class="row-odd"><td><p>Instruction Closely-Coupled Memory</p></td>
<td><p>ICCM</p></td>
<td><p>SECDED ECC</p></td>
<td><ul class="simple">
<li><p>Large SRAM arrays</p></li>
<li><p>Data could be modified and is only valid copy</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Data Closely-Coupled Memory</p></td>
<td><p>DCCM</p></td>
<td><p>SECDED ECC</p></td>
<td><ul class="simple">
<li><p>Large SRAM arrays</p></li>
<li><p>Data could be modified and is only valid copy</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Core-complex-external Memories</p></td>
<td><p>SoC memories</p></td>
<td><p>SECDED ECC</p></td>
<td><ul class="simple">
<li><p>Large SRAM arrays</p></li>
<li><p>Data could be modified and is only valid copy</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<h2 id="error-detection-and-handling"><span class="section-number">4.4. </span>Error Detection and Handling<a class="headerlink" href="#error-detection-and-handling" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="#tab-error-detection-recovery-logging"><span class="std std-numref">Table 4.2</span></a> summarizes the detection of errors, the recovery steps taken, and the logging of error events for each of the VeeR EL2 memories.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Memories with parity or ECC protection must be initialized with correct parity or ECC. Otherwise, a read access to an uninitialized memory may report an error. The method of initialization depends on the organization and capabilities of the memory. Initialization might be performed by a memory self-test or depend on firmware to overwrite the entire memory range (e.g., via DMA accesses).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the DCCM is uninitialized, a load following a store to the same DCCM address may get incorrect data. If firmware initializes the DCCM, aligned word-sized stores should be used (because they don’t check ECC), followed by a fence, before any load instructions to DCCM addresses are executed.</p>
</div>
<p>Empty fields shall be ignored as they provide structure information for the table</p>
<table class="docutils data align-default" id="tab-error-detection-recovery-logging">
<caption><span class="caption-number">Table 4.2 </span><span class="caption-text">Error Detection, Recovery, and Logging</span><a class="headerlink" href="#tab-error-detection-recovery-logging" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>Memory Type</strong></p></td>
<td><p><strong>Detection</strong></p></td>
<td><p><strong>Recovery</strong></p></td>
<td><p><strong>Recovery</strong></p></td>
<td><p><strong>Logging</strong></p></td>
<td><p><strong>Logging</strong></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p><strong>Single-bit Error</strong></p></td>
<td><p><strong>Double-bit Error</strong></p></td>
<td><p><strong>Single-bit Error</strong></p></td>
<td><p><strong>Double-bit Error</strong></p></td>
</tr>
<tr class="row-odd"><td><p>I-cache</p></td>
<td><ul class="simple">
<li><p>Each 64-bit chunk of instructions protected with 4 parity bits (one per 16 consecutive bits) or 7 ECC bits</p></li>
<li><p>Each cache line tag protected with 1 parity bit or 5 ECC bits</p></li>
<li><p>Parity/ECC bits checked in pipeline</p></li>
</ul>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p><strong>For parity</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><ul class="simple">
<li><p>For instruction and tag parity errors, invalidate all cache lines of set</p></li>
<li><p>Refetch cache line from SoC memory</p></li>
</ul>
</td>
<td><p>Undetected</p></td>
<td><ul class="simple">
<li><p>Increment I- cache correctable error counter <a class="footnote-reference brackets" href="#fn-error-protection-2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></li>
<li><p>If error counter has reached threshold, signal correctable error local interrupt (see <a class="reference internal" href="#i-cache-error-counter-threshold-register-micect"><span class="std std-ref"></span></a>)</p></li>
</ul>
</td>
<td><p>No action</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p><strong>For ECC</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><ul class="simple">
<li><p>For instruction and tag single- and double ECC errors, invalidate all cache lines of set</p></li>
<li><p>Refetch cache line from SoC memory <a class="footnote-reference brackets" href="#fn-error-protection-3" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>For instruction and tag single- and double ECC errors, invalidate all cache lines of set</p></li>
<li><p>Refetch cache line from SoC memory <a class="footnote-reference brackets" href="#fn-error-protection-3" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>Increment I-cache correctable error counter <a class="footnote-reference brackets" href="#fn-error-protection-2" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></li>
<li><p>If error counter has reached threshold, signal correctable error local interrupt (see <a class="reference internal" href="#i-cache-error-counter-threshold-register-micect"><span class="std std-ref"></span></a>)</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>Increment I-cache correctable error counter <a class="footnote-reference brackets" href="#fn-error-protection-2" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></li>
<li><p>If error counter has reached threshold, signal correctable error local interrupt (see <a class="reference internal" href="#i-cache-error-counter-threshold-register-micect"><span class="std std-ref"></span></a>)</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ICCM</p></td>
<td><ul class="simple">
<li><p>Each 32-bit chunk protected with 7 ECC bits</p></li>
<li><p>ECC checked in pipeline</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>For fetches <a class="footnote-reference brackets" href="#fn-error-protection-4" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>:</p>
<ul>
<li><p>Write corrected data/ECC back to ICCM</p></li>
<li><p>Refetch instruction from ICCM <a class="footnote-reference brackets" href="#fn-error-protection-3" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></li>
</ul>
</li>
<li><p>For DMA reads:</p>
<ul>
<li><p>Correct error in-line</p></li>
<li><p>Write corrected data/ECC back to ICCM</p></li>
</ul>
</li>
</ul>
</td>
<td><p>Fatal error <a class="footnote-reference brackets" href="#fn-error-protection-5" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> (uncorrectable)</p></td>
<td><ul class="simple">
<li><p>Increment <a class="footnote-reference brackets" href="#fn-error-protection-4" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> ICCM single- bit error counter</p></li>
<li><p>If error counter has reached threshold, signal correctable error local interrupt (see <a class="reference internal" href="#iccm-correctable-error-counter-threshold-register-miccmect"><span class="std std-ref"></span></a>)</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>For fetches <a class="footnote-reference brackets" href="#fn-error-protection-5" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>:</p>
<ul>
<li><p>Instruction access fault exception</p></li>
</ul>
</li>
<li><p>For DMA reads:</p>
<ul>
<li><p>Send error response on DMA slave bus to master</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>DCCM</p></td>
<td><ul class="simple">
<li><p>Each 32-bit chunk protected with 7 ECC bits</p></li>
<li><p>ECC checked in pipeline</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>Correct error in-line</p></li>
<li><p>Write <a class="footnote-reference brackets" href="#fn-error-protection-6" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> corrected data/ECC back to DCCM</p></li>
</ul>
</td>
<td><p>Fatal error <a class="footnote-reference brackets" href="#fn-error-protection-7" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a> (uncorrectable)</p></td>
<td><ul class="simple">
<li><p>Increment <a class="footnote-reference brackets" href="#fn-error-protection-6" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> DCCM single- bit error counter</p></li>
<li><p>If error counter has reached threshold, signal correctable error local interrupt (see <a class="reference internal" href="#dccm-correctable-error-counter-threshold-register-mdccmect"><span class="std std-ref"></span></a>)</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>For loads <a class="footnote-reference brackets" href="#fn-error-protection-7" id="id15" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>:</p>
<ul>
<li><p>Load access fault exception</p></li>
</ul>
</li>
<li><p>For stores <a class="footnote-reference brackets" href="#fn-error-protection-7" id="id16" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>:</p>
<ul>
<li><p>Store/AMO access fault exception</p></li>
</ul>
</li>
<li><p>For DMA reads:</p>
<ul>
<li><p>Send error response on DMA slave bus to master</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>SoC memories</p></td>
<td><p>ECC checked at SoC memory boundary</p></td>
<td><ul class="simple">
<li><p>Correct error</p></li>
<li><p>Send corrected data on bus</p></li>
<li><p>Write corrected data/ECC back to SRAM array</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>Fatal error (uncorrectable)</p></li>
<li><p>Data sent on bus with error indication</p></li>
<li><p>Core must ignore sent data</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>Increment SoC single-bit error counter local to memory</p></li>
<li><p>If error counter has reached threshold, signal external interrupt</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>For fetches:</p>
<ul>
<li><p>Instruction access fault exception</p></li>
</ul>
</li>
<li><p>For loads:</p>
<ul>
<li><p>Non-blocking load bus error NMI (see <a class="reference internal" href="memory-map.html#imprecise-bus-error-non-maskable-interrupt"><span class="std std-ref">Imprecise Bus Error Non-Maskable Interrupt</span></a>)</p></li>
</ul>
</li>
<li><p>For stores:</p>
<ul>
<li><p>Store bus error NMI (see <a class="reference internal" href="memory-map.html#imprecise-bus-error-non-maskable-interrupt"><span class="std std-ref">Imprecise Bus Error Non-Maskable Interrupt</span></a>)</p></li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>General comments:</p>
<ul class="simple">
<li><p>No address information of each individual correctable error is captured.</p></li>
<li><p>Stuck-at faults:</p>
<ul>
<li><p>Stuck-at bits would cause the correctable error threshold to be reached relatively quickly but are only reported if interrupts are enabled.</p></li>
<li><p>Use MBIST to determine exact location of the bad bit.</p></li>
<li><p>Because ICCM single-bit errors on fetches are not in-line corrected, VeeR EL2’s ICCM implements two row’s worth of redundant memory which is transparently managed in hardware.
These extra rows help to avoid that a stuck-at bit may hang the core.</p></li>
</ul>
</li>
</ul>
<h2 id="core-error-counter-threshold-registers"><span class="section-number">4.5. </span>Core Error Counter/Threshold Registers<a class="headerlink" href="#core-error-counter-threshold-registers" title="Link to this heading">¶</a></h2>
<p>A summary of platform-specific core error counter/threshold control/status registers in CSR space:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#i-cache-error-counter-threshold-register-micect"><span class="std std-ref">I-Cache Error Counter/Threshold Register (micect)</span></a></p></li>
<li><p><a class="reference internal" href="#iccm-correctable-error-counter-threshold-register-miccmect"><span class="std std-ref">ICCM Correctable Error Counter/Threshold Register (miccmect)</span></a></p></li>
<li><p><a class="reference internal" href="#dccm-correctable-error-counter-threshold-register-mdccmect"><span class="std std-ref">DCCM Correctable Error Counter/Threshold Register (mdccmect)</span></a></p></li>
</ul>
<p>All read/write control/status registers must have WARL (Write Any value, Read Legal value) behavior.</p>
<h3 id="i-cache-error-counter-threshold-register-micect"><span class="section-number">4.5.1. </span>I-Cache Error Counter/Threshold Register (micect)<a class="headerlink" href="#i-cache-error-counter-threshold-register-micect" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">micect</span></code> register holds the I-cache error counter and its threshold.
The <em>count</em> field of the <code class="docutils literal notranslate"><span class="pre">micect</span></code> register is incremented, if a parity/ECC error is detected on any of the cache line tags of the set or the instructions fetched from the I-cache.
The <em>thresh</em> field of the <code class="docutils literal notranslate"><span class="pre">micect</span></code> register holds a pointer to a bit position of the <em>count</em> field.
If the selected bit of the <em>count</em> field transitions from ‘0’ to ‘1’, the threshold is reached, and a correctable error local interrupt (see <a class="reference internal" href="memory-map.html#correctable-error-local-interrupt"><span class="std std-ref">Correctable Error Local Interrupt</span></a>) is signaled.</p>
<p>Hardware increments the <em>count</em> field on a detected error.
Firmware can non-destructively read the current <em>count</em> and <em>thresh</em> values or write to both these fields (e.g., to change the threshold and reset the counter).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The counter may overflow if not serviced and reset by firmware.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The correctable error local interrupt is not latched (i.e., “sticky”), but it stays pending until the counter overflows (i.e., as long as the <em>count</em> value is equal to or greater than the threshold value (= <span class="math notranslate nohighlight">\(2^{thresh}\)</span>)). When firmware resets the counter, the correctable error local interrupt condition is cleared.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">micect</span></code> register is instantiated, accessible, and has the same functional behavior even if the core is built without an I-cache.</p>
</div>
<p>This register is mapped to the non-standard read/write CSR address space.</p>
<table class="docutils data align-default" id="tab-i-cache-error-counter-threshold-register">
<caption><span class="caption-number">Table 4.3 </span><span class="caption-text">I-Cache Error Counter/Threshold Register (micect, at CSR 0x7F0)</span><a class="headerlink" href="#tab-i-cache-error-counter-threshold-register" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>Field</strong></p></td>
<td><p><strong>Bits</strong></p></td>
<td><p><strong>Description</strong></p></td>
<td><p><strong>Access</strong></p></td>
<td><p><strong>Reset</strong></p></td>
</tr>
<tr class="row-even"><td><p>thresh</p></td>
<td><p>31:27</p></td>
<td><p>I-cache parity/ECC error threshold:</p>
<ul class="simple">
<li><p>0..26: Value i selects <em>count[i]</em> bit</p></li>
<li><p>27..31: Invalid (when written, mapped by hardware to 26)</p></li>
</ul>
</td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>count</p></td>
<td><p>26:0</p></td>
<td><p>Counter incremented if I-cache parity/ECC error(s) detected. If <em>count[thresh]</em> transitions from ‘0’ to ‘1’, signal correctable error local  interrupt (see <a class="reference internal" href="memory-map.html#correctable-error-local-interrupt"><span class="std std-ref">Correctable Error Local Interrupt</span></a>).</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h3 id="iccm-correctable-error-counter-threshold-register-miccmect"><span class="section-number">4.5.2. </span>ICCM Correctable Error Counter/Threshold Register (miccmect)<a class="headerlink" href="#iccm-correctable-error-counter-threshold-register-miccmect" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">miccmect</span></code> register holds the ICCM correctable error counter and its threshold.
The <em>count</em> field of the <code class="docutils literal notranslate"><span class="pre">miccmect</span></code> register is incremented, if a correctable ECC error is detected on either an instruction fetch or a DMA read from the ICCM.
The <em>thresh</em> field of the <code class="docutils literal notranslate"><span class="pre">miccmect</span></code> register holds a pointer to a bit position of the <em>count</em> field.
If the selected bit of the <em>count</em> field transitions from ‘0’ to ‘1’, the threshold is reached, and a correctable error local interrupt (see <a class="reference internal" href="memory-map.html#correctable-error-local-interrupt"><span class="std std-ref">Correctable Error Local Interrupt</span></a>) is signaled.</p>
<p>Hardware increments the <em>count</em> field on a detected single-bit error.
Firmware can non-destructively read the current count and <em>thresh</em> values or write to both these fields (e.g., to change the threshold and reset the counter).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The counter may overflow if not serviced and reset by firmware.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The correctable error local interrupt is not latched (i.e., “sticky”), but it stays pending until the counter overflows (i.e., as long as the <em>count</em> value is equal to or greater than the threshold value (= <span class="math notranslate nohighlight">\(2^{thresh}\)</span>)). When firmware resets the counter, the correctable error local interrupt condition is cleared.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>DMA accesses while in power management Sleep (pmu/fw-halt) or debug halt (db-halt) state may encounter ICCM single-bit errors. Correctable errors are counted in the <code class="docutils literal notranslate"><span class="pre">miccmect</span></code> error counter irrespective of the core’s power state.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the unlikely case of a persistent single-bit error in the ICCM on a location needed for execution of the beginning of the ICCM correctable error local interrupt handler and the counter threshold is set to lower than 16 errors, forward progress may not be guaranteed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">miccmect</span></code> register is instantiated, accessible, and has the same functional behavior even if the core is built without an ICCM.</p>
</div>
<p>This register is mapped to the non-standard read/write CSR address space.</p>
<table class="docutils data align-default" id="tab-iccm-correctable-error-counter-threshold-register">
<caption><span class="caption-number">Table 4.4 </span><span class="caption-text">ICCM Correctable Error Counter/Threshold Register (miccmect, at CSR 0x7F1)</span><a class="headerlink" href="#tab-iccm-correctable-error-counter-threshold-register" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>Field</strong></p></td>
<td><p><strong>Bits</strong></p></td>
<td><p><strong>Description</strong></p></td>
<td><p><strong>Access</strong></p></td>
<td><p><strong>Reset</strong></p></td>
</tr>
<tr class="row-even"><td><p>thresh</p></td>
<td><p>31:27</p></td>
<td><p>ICCM correctable ECC error threshold:</p>
<ul class="simple">
<li><p>0..26: Value i selects <em>count[i]</em> bit</p></li>
<li><p>27..31: Invalid (when written, mapped by hardware to 26)</p></li>
</ul>
</td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>count</p></td>
<td><p>26:0</p></td>
<td><p>Counter incremented for each detected ICCM correctable ECC error.  If <em>count[thresh]</em> transitions from ‘0’ to ‘1’, signal correctable error local  interrupt (see <a class="reference internal" href="memory-map.html#correctable-error-local-interrupt"><span class="std std-ref">Correctable Error Local Interrupt</span></a>).</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h3 id="dccm-correctable-error-counter-threshold-register-mdccmect"><span class="section-number">4.5.3. </span>DCCM Correctable Error Counter/Threshold Register (mdccmect)<a class="headerlink" href="#dccm-correctable-error-counter-threshold-register-mdccmect" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">mdccmect</span></code> register holds the DCCM correctable error counter and its threshold.
The <em>count</em> field of the <code class="docutils literal notranslate"><span class="pre">mdccmect</span></code> register is incremented, if a correctable ECC error is detected on either a retired load/store instruction or a DMA read access to the DCCM.
The <em>thresh</em> field of the <code class="docutils literal notranslate"><span class="pre">mdccmect</span></code> register holds a pointer to a bit position of the <em>count</em> field.
If the selected bit of the <em>count</em> field transitions from ‘0’ to ‘1’, the threshold is reached, and a correctable error local interrupt (see <a class="reference internal" href="memory-map.html#correctable-error-local-interrupt"><span class="std std-ref">Correctable Error Local Interrupt</span></a>) is signaled.</p>
<p>Hardware increments the <em>count</em> field on a detected single-bit error for a retired load or store instruction (i.e., a nonspeculative access with no exception) or a DMA read.
Firmware can non-destructively read the current <em>count</em> and <em>thresh</em> values or write to both these fields (e.g., to change the threshold and reset the counter).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The counter may overflow if not serviced and reset by firmware.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The correctable error local interrupt is not latched (i.e., “sticky”), but it stays pending until the counter overflows (i.e., as long as the <em>count</em> value is equal to or greater than the threshold value (= <span class="math notranslate nohighlight">\(2^{thresh}\)</span>)).
When firmware resets the counter, the correctable error local interrupt condition is cleared.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>DMA accesses while in power management Sleep (pmu/fw-halt) or debug halt (db-halt) state may encounter DCCM single-bit errors.
Correctable errors are counted in the <code class="docutils literal notranslate"><span class="pre">mdccmect</span></code> error counter irrespective of the core’s power state.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mdccmect</span></code> register is instantiated, accessible, and has the same functional behavior even if the core is built without a DCCM.</p>
</div>
<p>This register is mapped to the non-standard read/write CSR address space.</p>
<table class="docutils data align-default" id="tab-mdccmect">
<caption><span class="caption-number">Table 4.5 </span><span class="caption-text">DCCM Correctable Error Counter/Threshold Register (mdccmect, at CSR 0x7F2)</span><a class="headerlink" href="#tab-mdccmect" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>Field</strong></p></td>
<td><p><strong>Bits</strong></p></td>
<td><p><strong>Description</strong></p></td>
<td><p><strong>Access</strong></p></td>
<td><p><strong>Reset</strong></p></td>
</tr>
<tr class="row-even"><td><p>thresh</p></td>
<td><p>31:27</p></td>
<td><p>DCCM correctable ECC error threshold:</p>
<ul class="simple">
<li><p>0..26: Value i selects <em>count[i]</em> bit</p></li>
<li><p>27..31: Invalid (when written, mapped by hardware to 26)</p></li>
</ul>
</td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>count</p></td>
<td><p>26:0</p></td>
<td><p>Counter incremented for each detected DCCM correctable ECC error.  If <em>count[thresh]</em> transitions from ‘0’ to ‘1’, signal correctable error local interrupt (see <a class="reference internal" href="memory-map.html#correctable-error-local-interrupt"><span class="std std-ref">Correctable Error Local Interrupt</span></a>).</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="fn-error-protection-1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Some highly reliable/available applications (e.g., automotive) might want to use an ECC-protected I-cache, instead of parity
protection. Therefore, SEDDED ECC protection is optionally provided in VeeR EL2 as well, selectable as a core build argument.
Note that the I-cache area increases significantly if ECC protection is used.</p>
</aside>
<aside class="footnote brackets" id="fn-error-protection-2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id2">1</a>,<a role="doc-backlink" href="#id5">2</a>,<a role="doc-backlink" href="#id6">3</a>)</span>
<p>It is unlikely, but possible that multiple I-cache parity/ECC errors are detected on a cache line in a single cycle, however, the Icache single-bit error counter is incremented only by one.</p>
</aside>
<aside class="footnote brackets" id="fn-error-protection-3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id3">1</a>,<a role="doc-backlink" href="#id4">2</a>,<a role="doc-backlink" href="#id8">3</a>)</span>
<p>A RFPC (ReFetch PC) flush is performed since in-line correction would create timing issues and require an additional clock cycle as well as a different architecture.</p>
</aside>
<aside class="footnote brackets" id="fn-error-protection-4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id7">1</a>,<a role="doc-backlink" href="#id10">2</a>)</span>
<p>All single-bit errors detected on fetches are corrected, written back to the ICCM, and counted, independent of actual instruction execution.</p>
</aside>
<aside class="footnote brackets" id="fn-error-protection-5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id9">1</a>,<a role="doc-backlink" href="#id11">2</a>)</span>
<p>For oldest instruction in pipeline only.</p>
</aside>
<aside class="footnote brackets" id="fn-error-protection-6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id12">1</a>,<a role="doc-backlink" href="#id14">2</a>)</span>
<p>For load/store accesses, the corrected data is written back to the DCCM and counted only if the load/store instruction retires (i.e., access is non-speculative and has no exception).</p>
</aside>
<aside class="footnote brackets" id="fn-error-protection-7" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id13">1</a>,<a role="doc-backlink" href="#id15">2</a>,<a role="doc-backlink" href="#id16">3</a>)</span>
<p>For non-speculative accesses only.</p>
</aside>
</aside>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2025-05-21
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="memory-map.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: 3. Memory Map" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              3. Memory Map
            </div>
          </div>
        </a>
      
      
        
        <a href="dual-core-lock-step.html" class="md-footer__link md-footer__link--next" aria-label="Next: 5. Dual-Core Lockstep (DCLS)" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              5. Dual-Core Lockstep (DCLS)
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        Copyright &#169; 2025 CHIPS Alliance The Linux Foundation®.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/antmicro" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/antmicro" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
        <script id="MathJax-script" src="_static/mathjax/tex-mml-chtml.js?v=cadf963e"></script>
    
  </body>
</html>